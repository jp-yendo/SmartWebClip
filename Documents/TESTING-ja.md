# テストガイド

## テストの実行

### ユニットテスト
```bash
flutter test
```

### 統合テスト
```bash
flutter test integration_test/
```

### プラットフォーム固有のテスト

#### Windows
```bash
flutter test -d windows
```

#### macOS
```bash
flutter test -d macos
```

#### Linux
```bash
flutter test -d linux
```

#### Android
```bash
flutter test -d android
```

#### iOS
```bash
flutter test -d ios
```

---

## テストカバレッジ

テストカバレッジレポートの生成：
```bash
flutter test --coverage
genhtml coverage/lcov.info -o coverage/html
```

ブラウザで`coverage/html/index.html`を開いてレポートを表示します。

---

## 手動テストチェックリスト

### URL管理
- [ ] 自動取得タイトルでURLを追加
- [ ] カスタムタイトルでURLを追加
- [ ] RSSチェックタイプでURLを追加
- [ ] HTML標準チェックタイプでURLを追加
- [ ] HTMLカスタムチェックタイプでURLを追加
- [ ] URL詳細を編集
- [ ] 単一URLを削除
- [ ] 複数URLを削除
- [ ] URLリストを表示（すべて、コレクション別、未整理）
- [ ] 更新日時順でURLをソート
- [ ] 追加日時順でURLをソート
- [ ] タイトル順でURLをソート

### コレクション管理
- [ ] 新しいコレクションを作成
- [ ] コレクションの名前を変更
- [ ] コレクションを削除
- [ ] コレクションを並べ替え
- [ ] コレクションにURLを追加
- [ ] コレクションからURLを削除
- [ ] 複数のURLを一度にコレクションに追加
- [ ] コレクションでURLをフィルタ

### 更新チェック
- [ ] 単一URLの手動更新チェック
- [ ] すべてのURLの手動更新チェック
- [ ] RSSフィード検出
- [ ] HTML標準変更検出
- [ ] HTMLカスタムセレクタ変更検出
- [ ] 無効なURLのエラー処理
- [ ] ネットワーク障害のエラー処理

### サムネイル
- [ ] URL追加時の自動サムネイル取得
- [ ] 既存URLのサムネイル再取得
- [ ] URLカードでのサムネイル表示
- [ ] サムネイルが見つからない場合の適切な処理

### 設定
- [ ] 言語を英語に変更
- [ ] 言語を日本語に変更
- [ ] アプリ再起動後も言語設定が維持される
- [ ] 言語変更後、UIが即座に更新される

### UI/UX
- [ ] 異なる画面サイズでのレスポンシブレイアウト
- [ ] 画面間のナビゲーション
- [ ] 適切なエラーメッセージ
- [ ] ローディングインジケータ
- [ ] 空状態のメッセージ
- [ ] 確認ダイアログ
- [ ] ダークモードサポート（システムテーマ）
- [ ] ライトモードサポート

### データの永続性
- [ ] アプリ再起動後もデータが保持される
- [ ] データベースマイグレーションが正しく動作する
- [ ] データ破損がない

### パフォーマンス
- [ ] アプリが素早く起動する
- [ ] URLリストでスムーズなスクロール
- [ ] URL追加時に遅延がない
- [ ] 効率的なメモリ使用
- [ ] メモリリークがない

---

## テストシナリオ

### シナリオ1: 初回ユーザー
1. アプリを起動
2. 空状態を確認
3. 最初のURLを追加
4. リストにURLが表示されることを確認
5. 最初のコレクションを作成
6. コレクションにURLを追加

### シナリオ2: 通常ユーザー
1. アプリを起動
2. URLリストを表示
3. 更新をチェック
4. 更新されたURLを表示
5. ブラウザでURLを開く
6. URL詳細を編集

### シナリオ3: パワーユーザー
1. 複数のURLを追加
2. 複数のコレクションを作成
3. コレクションにURLを整理
4. 一括操作を使用
5. 言語を変更
6. URLをソートおよびフィルタ

### シナリオ4: エラー処理
1. 無効なURLを追加
2. ネットワークエラーを処理
3. Webサイトのタイムアウトを処理
4. 無効なRSSフィードを処理
5. 無効なCSSセレクタを処理

---

## アクセシビリティテスト

- [ ] スクリーンリーダーサポート
- [ ] キーボードナビゲーション
- [ ] ハイコントラストモード
- [ ] フォントスケーリング
- [ ] タッチターゲットサイズ（モバイル）

---

## ローカライゼーションテスト

### 英語
- [ ] すべてのUIテキストが英語
- [ ] 日付フォーマット
- [ ] 数値フォーマット
- [ ] 複数形

### 日本語
- [ ] すべてのUIテキストが日本語
- [ ] 日付フォーマット
- [ ] 数値フォーマット
- [ ] 複数形

---

## プラットフォーム固有のテスト

### Windows
- [ ] ウィンドウのリサイズ
- [ ] 最小化/最大化
- [ ] マルチモニターサポート
- [ ] 高DPIサポート

### macOS
- [ ] ウィンドウのリサイズ
- [ ] フルスクリーンモード
- [ ] Mission Control互換性
- [ ] Retinaディスプレイサポート

### Linux
- [ ] ウィンドウのリサイズ
- [ ] 異なるデスクトップ環境（GNOME、KDE、XFCE）
- [ ] Wayland vs X11

### Android
- [ ] 異なる画面サイズ
- [ ] タブレットサポート
- [ ] 戻るボタンの動作
- [ ] アプリライフサイクル（一時停止/再開）
- [ ] 権限の処理

### iOS
- [ ] 異なる画面サイズ（iPhone、iPad）
- [ ] セーフエリアの処理
- [ ] ダークモード
- [ ] アプリライフサイクル
- [ ] 権限の処理

---

## パフォーマンステスト

### 負荷テスト
- 10 URLでテスト
- 100 URLでテスト
- 1000 URLでテスト
- 10コレクションでテスト
- 100コレクションでテスト

### ネットワークテスト
- 低速ネットワークでテスト
- 断続的な接続でテスト
- 接続なしでテスト
- 大きなWebページでテスト

### メモリテスト
- 通常動作中のメモリ使用量を監視
- メモリリークをチェック
- 制限されたメモリでテスト

---

## リグレッションテスト

各リリース前に完全なテストスイートを実行して、リグレッションがないことを確認します。

クリティカルパス用の自動リグレッションテストスイートを作成します。

---

## バグレポート

バグを報告する際は、以下を含めてください：
1. プラットフォームとOSバージョン
2. アプリバージョン
3. 再現手順
4. 期待される動作
5. 実際の動作
6. スクリーンショット/ログ（該当する場合）
